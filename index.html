<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TUMBLER - The Lockpick Game</title>
    <style>
        :root {
            --bg-color: #1a1a2e;
            --card-bg: #16213e;
            --grid-gap: 10px;
            --tile-size: 70px;
            --text-color: #eaeaea;
            
            --color-correct: #27ae60;
            --color-close: #f39c12;
            --color-far: #e74c3c;
            --color-default: #0f3460;
            --color-border: #1e3a5f;
            
            --key-bg: #1e3a5f;
            --key-text: #eaeaea;
            --key-hover: #2d5a87;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'SF Pro Display', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 10px;
            user-select: none;
        }

        header {
            text-align: center;
            padding: 20px 0 10px;
        }

        h1 {
            margin: 0;
            letter-spacing: 4px;
            font-size: 2.5rem;
            font-weight: 700;
            text-transform: uppercase;
            background: linear-gradient(135deg, #f39c12, #e74c3c);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .sub-text {
            font-size: 0.95rem;
            color: #95a5a6;
            margin-top: 8px;
            font-weight: 300;
            letter-spacing: 1px;
        }

        #game-board {
            display: grid;
            grid-template-rows: repeat(6, 1fr);
            grid-gap: var(--grid-gap);
            margin: 20px 0;
            padding: 20px;
            background: var(--card-bg);
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        /* Safe Door Frame */
        #game-board::before {
            content: '';
            position: absolute;
            inset: -8px;
            background: linear-gradient(135deg, #34495e, #2c3e50);
            border-radius: 20px;
            z-index: -1;
            box-shadow: 
                inset 0 2px 4px rgba(255,255,255,0.1),
                0 10px 40px rgba(0,0,0,0.5);
        }

        /* Safe Door Bolts */
        #game-board::after {
            content: '';
            position: absolute;
            top: 50%;
            left: -20px;
            width: 16px;
            height: 60%;
            transform: translateY(-50%);
            background: 
                radial-gradient(circle at center, #7f8c8d 30%, #34495e 100%);
            border-radius: 8px 0 0 8px;
            box-shadow: 
                inset -2px 0 4px rgba(0,0,0,0.5),
                0 4px 8px rgba(0,0,0,0.3);
        }

        .safe-bolt-right {
            position: absolute;
            top: 50%;
            right: -20px;
            width: 16px;
            height: 60%;
            transform: translateY(-50%);
            background: 
                radial-gradient(circle at center, #7f8c8d 30%, #34495e 100%);
            border-radius: 0 8px 8px 0;
            box-shadow: 
                inset 2px 0 4px rgba(0,0,0,0.5),
                0 4px 8px rgba(0,0,0,0.3);
        }

        .row {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-gap: var(--grid-gap);
        }

        .tile {
            width: var(--tile-size);
            height: var(--tile-size);
            background: 
                radial-gradient(circle at 30% 30%, #1a4d7a, var(--color-default));
            border: 3px solid var(--color-border);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            font-weight: 700;
            text-transform: uppercase;
            position: relative;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 
                0 4px 0 var(--color-border), 
                inset 0 1px 0 rgba(255,255,255,0.1),
                inset 0 -2px 8px rgba(0,0,0,0.3);
        }

        /* Tumbler dial notches */
        .tile::before {
            content: '';
            position: absolute;
            width: 6px;
            height: 6px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            top: 8px;
            box-shadow: 
                0 0 2px rgba(255,255,255,0.4),
                inset 0 1px 1px rgba(0,0,0,0.3);
        }

        /* Center dial indicator */
        .tile::after {
            content: '';
            position: absolute;
            width: 3px;
            height: 12px;
            background: linear-gradient(to bottom, #e74c3c, #c0392b);
            top: -2px;
            border-radius: 2px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .tile[data-status="filled"] {
            border-color: #3498db;
            transform: scale(1.08) rotate(15deg);
            box-shadow: 0 4px 0 #2980b9, 0 0 20px rgba(52, 152, 219, 0.4);
        }

        .tile[data-status="filled"]::after {
            transform: rotate(15deg);
            background: linear-gradient(to bottom, #3498db, #2980b9);
        }

        .indicator {
            font-size: 1.1rem;
            position: absolute;
            bottom: 4px;
            width: 100%;
            text-align: center;
            opacity: 0;
            font-weight: 900;
            transition: opacity 0.3s;
        }

        .tile.correct {
            background: radial-gradient(circle at 30% 30%, #52c97a, #27ae60);
            color: white;
            border-color: #1e8449;
            box-shadow: 
                0 4px 0 #1e8449, 
                0 0 30px rgba(39, 174, 96, 0.6),
                inset 0 2px 8px rgba(255,255,255,0.3);
            animation: unlock 0.6s ease-out;
        }

        .tile.correct::after {
            background: linear-gradient(to bottom, #f1c40f, #f39c12);
            height: 16px;
            box-shadow: 0 0 8px rgba(241, 196, 15, 0.8);
        }

        .tile.close {
            background: radial-gradient(circle at 30% 30%, #f5b041, #f39c12);
            color: white;
            border-color: #d68910;
            box-shadow: 0 4px 0 #d68910, inset 0 2px 6px rgba(255,255,255,0.2);
        }

        .tile.far {
            background: radial-gradient(circle at 30% 30%, #ec7063, #e74c3c);
            color: white;
            border-color: #a93226;
            box-shadow: 0 4px 0 #a93226, inset 0 2px 6px rgba(255,255,255,0.2);
        }

        .tile.evaluated .indicator {
            opacity: 1;
        }

        @keyframes unlock {
            0% { 
                transform: scale(1) rotate(0deg); 
            }
            25% { 
                transform: scale(1.15) rotate(-90deg); 
            }
            50% { 
                transform: scale(1.1) rotate(90deg); 
            }
            75% { 
                transform: scale(1.12) rotate(-45deg); 
            }
            100% { 
                transform: scale(1) rotate(0deg); 
            }
        }

        #keyboard {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            width: 100%;
            max-width: 600px;
            padding: 0 10px;
            margin-bottom: 20px;
        }

        .key-row {
            display: flex;
            gap: 6px;
            width: 100%;
            justify-content: center;
        }

        .key {
            background: var(--key-bg);
            color: var(--key-text);
            font-weight: 600;
            font-size: 0.9rem;
            border-radius: 8px;
            border: none;
            padding: 0;
            height: 58px;
            min-width: 32px;
            flex: 1;
            max-width: 48px;
            cursor: pointer;
            text-transform: uppercase;
            display: flex;
            justify-content: center;
            align-items: center;
            touch-action: manipulation;
            box-shadow: 0 3px 0 #0f2744;
            transition: all 0.1s;
            position: relative;
        }

        .key:hover {
            background: var(--key-hover);
            transform: translateY(-2px);
            box-shadow: 0 5px 0 #0f2744;
        }

        .key:active {
            transform: translateY(3px);
            box-shadow: 0 0 0 #0f2744;
        }

        .key.wide {
            flex: 1.8;
            max-width: 80px;
            font-size: 0.75rem;
            letter-spacing: 0.5px;
        }

        .key::after {
            content: attr(data-value);
            position: absolute;
            top: 2px;
            right: 3px;
            font-size: 0.65rem;
            opacity: 0.5;
            font-weight: 400;
        }

        .key.wide::after {
            content: none;
        }

        #message-container {
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 10px;
        }

        .toast {
            background: linear-gradient(135deg, #2d3436, #000000);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from { 
                opacity: 0; 
                transform: translateY(-20px);
            }
            to { 
                opacity: 1; 
                transform: translateY(0);
            }
        }

        .legend {
            display: flex;
            gap: 20px;
            font-size: 0.8rem;
            margin-bottom: 15px;
            background: var(--card-bg);
            padding: 12px 24px;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
        }

        .legend-item { 
            display: flex; 
            align-items: center; 
            gap: 8px;
            font-weight: 500;
        }

        .dot { 
            width: 12px; 
            height: 12px; 
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        @media (max-width: 600px) {
            :root {
                --tile-size: 60px;
            }

            h1 {
                font-size: 2rem;
            }

            .key {
                height: 52px;
                font-size: 0.85rem;
            }

            #game-board {
                padding: 15px;
            }
        }
    </style>
</head>
<body>

    <header>
        <h1>TUMBLER</h1>
        <div class="sub-text">Crack the code. Pick the lock.</div>
    </header>

    <div id="message-container"></div>

    <div id="game-board"></div>

    <div class="legend">
        <div class="legend-item"><div class="dot" style="background:var(--color-far)"></div> Far (>9)</div>
        <div class="legend-item"><div class="dot" style="background:var(--color-close)"></div> Close (â‰¤9)</div>
        <div class="legend-item"><div class="dot" style="background:var(--color-correct)"></div> Unlocked</div>
    </div>

    <div id="keyboard"></div>

<script>
    const WORD_LIST = [
        "HAWK", "LION", "WOLF", "CART", "JUMP", "FISH", "BIRD", "CODE", "LOCK", "KEYS",
        "READ", "BLUE", "SOUL", "DARK", "MIND", "TIME", "PLAY", "GAME", "LOVE", "HOPE"
    ];

    const TARGET_WORD = WORD_LIST[Math.floor(Math.random() * WORD_LIST.length)];
    const WORD_LENGTH = 4;
    const MAX_TRIES = 6;

    let currentRow = 0;
    let currentTile = 0;
    let guesses = Array(6).fill(null).map(() => Array(4).fill(""));
    let isGameOver = false;

    const board = document.getElementById('game-board');
    const keyboardContainer = document.getElementById('keyboard');
    const messageContainer = document.getElementById('message-container');

    function initGame() {
        console.log("Target Word:", TARGET_WORD);
        createBoard();
        createKeyboard();
        document.addEventListener('keydown', handleKeydown);
    }

    function createBoard() {
        for (let r = 0; r < MAX_TRIES; r++) {
            const rowDiv = document.createElement('div');
            rowDiv.classList.add('row');
            rowDiv.setAttribute('id', `row-${r}`);
            
            for (let c = 0; c < WORD_LENGTH; c++) {
                const tileDiv = document.createElement('div');
                tileDiv.classList.add('tile');
                tileDiv.setAttribute('id', `row-${r}-tile-${c}`);
                
                const letterSpan = document.createElement('span');
                letterSpan.classList.add('letter');
                tileDiv.appendChild(letterSpan);

                const indicatorSpan = document.createElement('span');
                indicatorSpan.classList.add('indicator');
                tileDiv.appendChild(indicatorSpan);

                rowDiv.appendChild(tileDiv);
            }
            board.appendChild(rowDiv);
        }
        
        // Add right safe bolt
        const boltRight = document.createElement('div');
        boltRight.classList.add('safe-bolt-right');
        board.appendChild(boltRight);
    }

    function createKeyboard() {
        const rows = [
            "ABCDEFGHIJ",
            "KLMNOPQRST",
            "UVWXYZ"
        ];

        rows.forEach((rowString, index) => {
            const rowDiv = document.createElement('div');
            rowDiv.classList.add('key-row');

            if (index === 2) {
                const enterKey = createKey("ENTER", "wide");
                enterKey.onclick = submitGuess;
                rowDiv.appendChild(enterKey);
            }

            for (let char of rowString) {
                const key = createKey(char, "");
                key.onclick = () => addLetter(char);
                rowDiv.appendChild(key);
            }

            if (index === 2) {
                const backKey = createKey("âŒ«", "wide");
                backKey.onclick = deleteLetter;
                rowDiv.appendChild(backKey);
            }

            keyboardContainer.appendChild(rowDiv);
        });
    }

    function createKey(content, className) {
        const button = document.createElement('button');
        button.textContent = content;
        button.classList.add('key');
        if (className) button.classList.add(className);
        
        if (!className && content.length === 1) {
            const value = content.charCodeAt(0) - 64;
            button.setAttribute('data-value', value);
        }
        
        return button;
    }

    function getLetterValue(char) {
        return char.charCodeAt(0) - 64;
    }

    function addLetter(letter) {
        if (isGameOver) return;
        if (currentTile < WORD_LENGTH) {
            guesses[currentRow][currentTile] = letter;
            const tile = document.getElementById(`row-${currentRow}-tile-${currentTile}`);
            tile.querySelector('.letter').textContent = letter;
            tile.setAttribute('data-status', 'filled');
            currentTile++;
        }
    }

    function deleteLetter() {
        if (isGameOver) return;
        if (currentTile > 0) {
            currentTile--;
            guesses[currentRow][currentTile] = "";
            const tile = document.getElementById(`row-${currentRow}-tile-${currentTile}`);
            tile.querySelector('.letter').textContent = "";
            tile.removeAttribute('data-status');
        }
    }

    function showMessage(msg) {
        messageContainer.innerHTML = `<div class="toast">${msg}</div>`;
        setTimeout(() => {
            messageContainer.innerHTML = '';
        }, 2000);
    }

    function submitGuess() {
        if (isGameOver) return;
        const guessWordArr = guesses[currentRow];
        const guessWord = guessWordArr.join("");

        if (currentTile < WORD_LENGTH) {
            showMessage("Not enough letters");
            return;
        }

        evaluateGuess(guessWordArr);
    }

    function evaluateGuess(guessArr) {
        const targetArr = TARGET_WORD.split("");
        let correctCount = 0;

        for (let i = 0; i < WORD_LENGTH; i++) {
            const tile = document.getElementById(`row-${currentRow}-tile-${i}`);
            const indicator = tile.querySelector('.indicator');
            const letter = guessArr[i];
            
            const guessVal = getLetterValue(letter);
            const targetVal = getLetterValue(targetArr[i]);
            const diff = targetVal - guessVal;

            setTimeout(() => {
                tile.classList.add('evaluated');

                if (diff === 0) {
                    tile.classList.add('correct');
                    indicator.innerHTML = "âœ“";
                    correctCount++;
                } else {
                    let symbol = "";
                    let distClass = "";
                    
                    if (Math.abs(diff) > 9) {
                        distClass = "far";
                        symbol = diff > 0 ? "â‡‘" : "â‡“";
                    } else {
                        distClass = "close";
                        symbol = diff > 0 ? "â†‘" : "â†“";
                    }

                    tile.classList.add(distClass);
                    indicator.innerHTML = symbol;
                }
            }, i * 150);
        }

        setTimeout(() => {
            if (correctCount === WORD_LENGTH) {
                showMessage("ðŸŽ‰ UNLOCKED!");
                isGameOver = true;
            } else {
                if (currentRow < MAX_TRIES - 1) {
                    currentRow++;
                    currentTile = 0;
                } else {
                    showMessage(`Game Over! Word was ${TARGET_WORD}`);
                    isGameOver = true;
                }
            }
        }, WORD_LENGTH * 150 + 200);
    }

    function handleKeydown(e) {
        const key = e.key.toUpperCase();
        if (key === "ENTER") {
            submitGuess();
        } else if (key === "BACKSPACE") {
            deleteLetter();
        } else if (/^[A-Z]$/.test(key)) {
            addLetter(key);
        }
    }

    initGame();
</script>

</body>
</html>